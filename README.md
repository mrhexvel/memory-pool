# MemoryPool
Простая реализация пула памяти на C++ с использованием фиксированного размера памяти и базовым управлением свободными блоками.

![alt text](https://i.imgur.com/hhSKBo3.png)
## Описание

`MemoryPool` — это класс, реализующий пул памяти с поддержкой выделения и освобождения блоков памяти заданного размера. Он использует единый непрерывный блок памяти, выделенный при создании объекта, и управляет свободными участками с помощью векторов и мьютекса для потокобезопасности.

Основные возможности:
- Выделение памяти фиксированного размера из пула (`allocate`)
- Освобождение ранее выделенной памяти (`deallocate`)
- Объединение смежных свободных блоков для минимизации фрагментации
- Потокобезопасность благодаря использованию `std::mutex`

## Зависимости

- Стандартная библиотека C++ (STL)
- Компилятор с поддержкой C++11 или выше

## Использование

### Пример кода

```cpp
#include <iostream>
#include "MemoryPool.h"

int main() {
    // создание пула памяти размером 1024 байта
    MemoryPool pool(1024);

    // выделение памяти
    void* mem1 = pool.allocate(256);
    void* mem2 = pool.allocate(128);

    // освобождение памяти
    pool.deallocate(mem1, 256);
    pool.deallocate(mem2, 128);

    std::cout << "память успешно выделена." << std::endl;
    return 0;
}
```

### Компиляция и запуск

```bash
g++ -o memory_pool main.cpp -std=c++11
./memory_pool
```

## Структура кода

### Класс `MemoryPool`

- **Конструктор**: `MemoryPool(std::size_t poolSize)` — выделяет пул памяти заданного размера.
- **Деструктор**: `~MemoryPool()` — освобождает выделенную память.
- **Метод `allocate`**: `void* allocate(std::size_t size)` — выделяет блок памяти заданного размера.
- **Метод `deallocate`**: `void deallocate(void* ptr, std::size_t size)` — освобождает указанный блок памяти.
- **Вспомогательный метод `consolidateFreeBlocks`**: объединяет смежные свободные блоки для предотвращения фрагментации.

### Внутренние данные

- `poolSize`: размер пула памяти в байтах.
- `pool`: указатель на начало выделенной памяти.
- `freeBlocks`: вектор указателей на свободные блоки.
- `freeBlockSizes`: вектор размеров свободных блоков.
- `mtx`: мьютекс для обеспечения потокобезопасности.

## Ограничения

- Нет поддержки выделения памяти больше, чем изначальный размер пула.
- Простая стратегия поиска свободного блока (первый подходящий).
- Возможна фрагментация при частом выделении/освобождении блоков разного размера.

## Возможные улучшения

- Использование более эффективного алгоритма поиска свободного блока (например, "best fit").
- Добавление поддержки динамического расширения пула.
- Реализация пула с заранее заданными размерами блоков для повышения производительности.

## Лицензия

Этот код распространяется под лицензией MIT. См. файл `LICENSE` для подробностей (если применимо).
